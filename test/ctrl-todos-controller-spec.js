"use strict";

describe('TodosController', function() {
  var scope, ctrl, httpBackend;
  beforeEach(module('basecampExtension.services'));
  beforeEach(module('basecampExtension.servicesCache'));
  beforeEach(module('basecampExtension.controllers'));
  beforeEach(module('basecampExtension.filters'));
  beforeEach(module('basecampExtension.directives'));
  beforeEach(module('ui.highlight'));
  beforeEach(module('ui.keypress'));
  beforeEach(inject(function($rootScope, $controller, $httpBackend) {
    scope = $rootScope;
    httpBackend = $httpBackend;
    ctrl = $controller('TodosController', {
      $scope: scope
    });
  }));

  afterEach(function() {
    httpBackend.verifyNoOutstandingExpectation();
    httpBackend.verifyNoOutstandingRequest();
  });

  it("should GET Basecamp account ID of the organization", function() {
    var getRequest = 'https://launchpad.37signals.com/authorization.json';
    var fakeGetResponse = {
      "expires_at": "2013-05-29T08:24:33Z",
      "accounts": [
        {
          "name": "Asiance",
          "href": "https://basecamp.com/2004093/api/v1",
          "id": 2004093,
          "product": "bcx"
        }
      ],
      "identity": {
        "id": 6398280,
        "last_name": "Piou",
        "email_address": "gilles@asiance.com",
        "first_name": "Gilles"
      }
    };
    httpBackend.when('GET', getRequest).respond(fakeGetResponse);
    scope.getBasecampAccount();
    httpBackend.flush();
    expect(scope.basecampId).toBe(2004093);
    expect(localStorage.getItem('basecampId')).toBe('2004093');
  });

  it("should GET User account ID", function() {
    var getRequest = 'https://basecamp.com/2004093/api/v1/people/me.json';
    var fakeGetResponse = {
      "id": 3768284,
      "name": "Gilles Piou",
      "email_address": "gilles@asiance.com",
      "admin": false,
      "created_at": "2013-02-18T12:13:19.000+09:00",
      "updated_at": "2013-05-14T14:29:38.000+09:00",
      "identity_id": 6398280,
      "avatar_url": "http://dge9rmgqjs8m1.cloudfront.net/global/e32a5c25c36ecdfd8c9a51340e400351e8679d8e081218891aba5e654443eb68427966876abf2ce68c928c7faa51286abea6deaf627f786162294cb4a5801da6379356d7078157fbfac76f160bde6694/avatar.gif?r=3",
      "events": {
        "count": 635,
        "updated_at": "2013-05-14T14:29:38.000+09:00",
        "url": "https://basecamp.com/2004093/api/v1/people/3768284-gilles-piou/events.json"
      },
      "assigned_todos": {
        "count": 88,
        "updated_at": "2013-05-14T14:29:38.000+09:00",
        "url": "https://basecamp.com/2004093/api/v1/people/3768284-gilles-piou/assigned_todos.json"
      }
    };
    httpBackend.when('GET', getRequest).respond(fakeGetResponse);
    scope.basecampId = 2004093;
    scope.getUser();
    httpBackend.flush();
    expect(scope.userId).toBe(3768284);
    expect(localStorage.getItem('userId')).toBe('3768284');
  });

  it("should GET People of the organization", function() {
    var getRequest = 'https://basecamp.com/2004093/api/v1/people.json';
    var fakeGetResponse = [{
      "id": 2527441,
      "name": "Adrien Desbiaux",
      "email_address": "adrien@asiance.com",
      "admin": true,
      "created_at": "2012-06-04T10:49:47.000+09:00",
      "updated_at": "2013-04-29T08:08:15.000+09:00",
      "identity_id": 5004767,
      "avatar_url": "http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7cbca74e07a280166676e352471b046624b21f0060513a2d520c967361a92eb605117d1b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3",
      "url": "https://basecamp.com/2004093/api/v1/people/2527441-adrien-desbiaux.json"
    },
    {
      "id": 2527422,
      "name": "Antoine Blancher",
      "email_address": "antoine@asiance.com",
      "admin": true,
      "created_at": "2011-05-02T10:35:11.000+09:00",
      "updated_at": "2013-04-29T09:42:02.000+09:00",
      "identity_id": 2952920,
      "avatar_url": "http://dge9rmgqjs8m1.cloudfront.net/global/d8852ea40151b7672308e64d48513831deba577a04f16f12d8cb57689faf7402ef4eff4bcd0431e09f9e92f6de97c3ae228188f255ba2bea3408befe7f3ec31f283909fe99915c1277393873c6927a31/avatar.gif?r=3",
      "url": "https://basecamp.com/2004093/api/v1/people/2527422-antoine-blancher.json"
    },
    {
      "id": 3768284,
      "name": "Gilles Piou",
      "email_address": "gilles@asiance.com",
      "admin": false,
      "created_at": "2013-02-18T12:13:19.000+09:00",
      "updated_at": "2013-04-26T17:03:04.000+09:00",
      "identity_id": 6398280,
      "avatar_url": "http://dge9rmgqjs8m1.cloudfront.net/global/e32a5c25c36ecdfd8c9a51340e400351e8679d8e081218891aba5e654443eb68427966876abf2ce68c928c7faa51286abea6deaf627f786162294cb4a5801da6379356d7078157fbfac76f160bde6694/avatar.gif?r=3",
      "url": "https://basecamp.com/2004093/api/v1/people/3768284-gilles-piou.json"
    },
    {
      "id": 2527420,
      "name": "Laurent Le Graverend",
      "email_address": "laurent@asiance.com",
      "admin": true,
      "created_at": "2010-04-06T14:03:43.000+09:00",
      "updated_at": "2013-04-27T11:37:37.000+09:00",
      "identity_id": 1009363,
      "avatar_url": "http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3",
      "url": "https://basecamp.com/2004093/api/v1/people/2527420-laurent-le-graverend.json"
    }];
    httpBackend.when('GET', getRequest).respond(fakeGetResponse);
    scope.basecampId = 2004093;
    scope.getPeople();
    httpBackend.flush();
    expect(scope.people.length).toBe(7);
    expect(JSON.parse(localStorage.getItem('people')).length).toBe(4);
  });

  it("should group todos by project", function() {
    scope.allTodos = [{"id":39435405,"todolist_id":6773708,"position":1,"content":"Check Korean for Jewels Shoes Watches","completed":false,"created_at":"2013-04-16T17:50:33.000+09:00","updated_at":"2013-05-03T16:20:33.000+09:00","comments_count":3,"due_on":"2013-05-08","due_at":"2013-05-08","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527441,"type":"Person","name":"Adrien Desbiaux"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/39435405-check-korean-for.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":40712446,"todolist_id":6773708,"position":2,"content":"Kr - Add watches banner + jewels + shoes","completed":false,"created_at":"2013-04-25T10:39:07.000+09:00","updated_at":"2013-04-30T21:29:17.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/40712446-kr-add-watches.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":40712476,"todolist_id":6773708,"position":3,"content":"Kr - Complete xml for Watches + jewels + shoes","completed":false,"created_at":"2013-04-25T10:39:41.000+09:00","updated_at":"2013-04-25T11:15:55.000+09:00","comments_count":0,"due_on":"2013-04-26","due_at":"2013-04-26","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527441,"type":"Person","name":"Adrien Desbiaux"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/40712476-kr-complete-xml.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":40712501,"todolist_id":6773708,"position":4,"content":"Kr - Add watches + jewels + shoes banners on mobile site","completed":false,"created_at":"2013-04-25T10:40:51.000+09:00","updated_at":"2013-04-25T11:16:11.000+09:00","comments_count":0,"due_on":"2013-04-29","due_at":"2013-04-29","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527441,"type":"Person","name":"Adrien Desbiaux"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/40712501-kr-add-watches.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":43502885,"todolist_id":6271764,"position":1,"content":"Confirm RoadShow banner on test.lacoste.co.kr/univers","completed":false,"created_at":"2013-05-16T14:08:03.000+09:00","updated_at":"2013-05-16T14:08:03.000+09:00","comments_count":0,"due_on":"2013-05-16","due_at":"2013-05-16","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527423,"type":"Person","name":"Hyunjung Lee"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/43502885-confirm-roadshow.json","todolist":"Banners","project":"Lacoste Univers","project_id":1641438},{"id":36183676,"todolist_id":6141826,"position":1,"content":"Please check with Youngchul and Antoine if master are ok","completed":false,"created_at":"2013-03-22T09:24:39.000+09:00","updated_at":"2013-03-22T09:24:39.000+09:00","comments_count":0,"due_on":"2013-03-22","due_at":"2013-03-22","creator":{"id":2527356,"name":"Olivier Mouroux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/3f4607037c1b2b0d65016d9189a1bf171c92284c/avatar.gif?r=3"},"assignee":{"id":3606528,"type":"Person","name":"KellyMJ KIM"},"url":"https://basecamp.com/2004093/api/v1/projects/2004341-lacoste-polo/todos/36183676-please-check-with.json","todolist":"PM","project":"Lacoste Polo","project_id":2004341},{"id":39791695,"todolist_id":6834369,"position":1,"content":"Korean - Create Rules in PDF","completed":false,"created_at":"2013-04-18T18:34:00.000+09:00","updated_at":"2013-04-18T18:34:00.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2004341-lacoste-polo/todos/39791695-korean-create.json","todolist":"DTS","project":"Lacoste Polo","project_id":2004341},{"id":43152185,"todolist_id":6834369,"position":2,"content":"home banner replacement","completed":false,"created_at":"2013-05-14T18:22:18.000+09:00","updated_at":"2013-05-14T18:24:13.000+09:00","comments_count":1,"due_on":"2013-05-15","due_at":"2013-05-15","creator":{"id":2527423,"name":"Hyunjung Lee","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/4aedabe1802d6cfde3f5a5c5c2fe6e8d…08a560f94afa2b00006e8954fe0aab815c57146e1d19eb67f677aa10ac2/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2004341-lacoste-polo/todos/43152185-home-banner.json","todolist":"DTS","project":"Lacoste Polo","project_id":2004341},{"id":39189314,"todolist_id":5600913,"position":1,"content":"Correct fonts for differents languages","completed":false,"created_at":"2013-04-14T11:36:28.000+09:00","updated_at":"2013-04-27T11:37:37.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2120902-asiance-website/todos/39189314-correct-fonts-for.json","todolist":"Updates","project":"Asiance website, blogs and facebook","project_id":2120902},{"id":38298142,"todolist_id":6166411,"position":1,"content":"Todo test","completed":false,"created_at":"2013-04-08T09:49:37.000+09:00","updated_at":"2013-05-14T14:29:38.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":3768284,"name":"Gilles Piou","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/e32a5c25c36ecdfd8c9a51340e400351…eaf627f786162294cb4a5801da6379356d7078157fbfac76f160bde6694/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/38298142-todo-test.json","todolist":"TODO LIST FOR TEST ONLY","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":38487794,"todolist_id":6611252,"position":1,"content":"filter based on Firstname and replace space by dash","completed":false,"created_at":"2013-04-09T10:23:19.000+09:00","updated_at":"2013-04-09T10:30:30.000+09:00","comments_count":0,"due_on":"2013-04-09","due_at":"2013-04-09","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/38487794-filter-based-on.json","todolist":"Misc","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":38715271,"todolist_id":6611252,"position":2,"content":"visit this todo is not localized","completed":false,"created_at":"2013-04-10T18:57:01.000+09:00","updated_at":"2013-04-10T18:57:01.000+09:00","comments_count":0,"due_on":"2013-04-10","due_at":"2013-04-10","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/38715271-visit-this-todo-is.json","todolist":"Misc","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":41111117,"todolist_id":7052000,"position":1,"content":"Validate design with Antoine","completed":false,"created_at":"2013-04-29T12:19:19.000+09:00","updated_at":"2013-04-29T12:19:19.000+09:00","comments_count":0,"due_on":"2013-04-29","due_at":"2013-04-29","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/41111117-validate-design-with.json","todolist":"Website","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":43156241,"todolist_id":7053347,"position":1,"content":"Reporting analytics","completed":false,"created_at":"2013-05-14T19:06:57.000+09:00","updated_at":"2013-05-14T19:06:57.000+09:00","comments_count":0,"due_on":"2013-05-15","due_at":"2013-05-15","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2621444-finnair-campaigns/todos/43156241-reporting-analytics.json","todolist":"Development","project":"Finnair - Campaigns only for FB members","project_id":2621444},{"id":41959135,"todolist_id":7191048,"position":1,"content":"Analytics tags are inserted","completed":false,"created_at":"2013-05-04T09:32:35.000+09:00","updated_at":"2013-05-04T09:32:35.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959135-analytics-tags-are.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959144,"todolist_id":7191048,"position":2,"content":"Analytics trackers are validated and inserted","completed":false,"created_at":"2013-05-04T09:32:59.000+09:00","updated_at":"2013-05-04T09:32:59.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959144-analytics-trackers.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959151,"todolist_id":7191048,"position":3,"content":"Open Graph tags are correct and tested","completed":false,"created_at":"2013-05-04T09:33:26.000+09:00","updated_at":"2013-05-04T09:33:26.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959151-open-graph-tags-are.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959160,"todolist_id":7191048,"position":4,"content":"Console is free of errors on IE8+, Chrome, Firefox","completed":false,"created_at":"2013-05-04T09:34:07.000+09:00","updated_at":"2013-05-04T09:34:07.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959160-console-is-free-of.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959171,"todolist_id":7191048,"position":5,"content":"Database backup is done everyday","completed":false,"created_at":"2013-05-04T09:34:33.000+09:00","updated_at":"2013-05-04T09:34:41.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959171-database-backup-is.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959252,"todolist_id":7191048,"position":7,"content":"CSS is minimified","completed":false,"created_at":"2013-05-04T09:37:19.000+09:00","updated_at":"2013-05-04T09:37:24.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959252-css-is-minimified.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959336,"todolist_id":7191048,"position":8,"content":"Javascript is minimified","completed":false,"created_at":"2013-05-04T09:38:04.000+09:00","updated_at":"2013-05-04T09:38:04.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959336-javascript-is.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959363,"todolist_id":7191048,"position":10,"content":"Score is reasonable in Page Speed","completed":false,"created_at":"2013-05-04T09:38:36.000+09:00","updated_at":"2013-05-04T09:38:39.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959363-score-is-reasonable.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959376,"todolist_id":7191048,"position":11,"content":"Humans.txt ;-)","completed":false,"created_at":"2013-05-04T09:39:18.000+09:00","updated_at":"2013-05-04T09:39:18.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959376-humans-txt.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959407,"todolist_id":7191048,"position":12,"content":"Meta description and title are OK","completed":false,"created_at":"2013-05-04T09:40:32.000+09:00","updated_at":"2013-05-04T09:40:35.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959407-meta-description-and.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959447,"todolist_id":7191048,"position":13,"content":"HTTP expires correctly configured","completed":false,"created_at":"2013-05-04T09:41:54.000+09:00","updated_at":"2013-05-04T09:41:54.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959447-http-expires.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959519,"todolist_id":7191048,"position":14,"content":"Scripts are configured with production URLs (CDN, ...)","completed":false,"created_at":"2013-05-04T09:43:49.000+09:00","updated_at":"2013-05-04T09:44:04.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959519-scripts-are.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959551,"todolist_id":7191048,"position":9,"content":"Sprites don't contains unused images","completed":false,"created_at":"2013-05-04T09:45:02.000+09:00","updated_at":"2013-05-04T09:45:07.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959551-sprites-don-t.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959656,"todolist_id":7191048,"position":6,"content":"Favicon!","completed":false,"created_at":"2013-05-04T09:48:42.000+09:00","updated_at":"2013-05-04T09:48:51.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959656-favicon.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959722,"todolist_id":7191375,"position":1,"content":"Game1 tested on IE8","completed":false,"created_at":"2013-05-04T09:50:23.000+09:00","updated_at":"2013-05-04T09:50:23.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959722-game1-tested-on-ie8.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959729,"todolist_id":7191375,"position":2,"content":"Game1 tested on IE9","completed":false,"created_at":"2013-05-04T09:50:33.000+09:00","updated_at":"2013-05-04T09:50:33.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959729-game1-tested-on-ie9.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959739,"todolist_id":7191375,"position":3,"content":"Game1 tested on IE10","completed":false,"created_at":"2013-05-04T09:50:42.000+09:00","updated_at":"2013-05-04T09:50:42.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959739-game1-tested-on-ie10.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959741,"todolist_id":7191375,"position":4,"content":"Game1 tested on Chrome","completed":false,"created_at":"2013-05-04T09:50:48.000+09:00","updated_at":"2013-05-04T09:50:48.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959741-game1-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959744,"todolist_id":7191375,"position":5,"content":"Game1 tested on Firefox","completed":false,"created_at":"2013-05-04T09:50:53.000+09:00","updated_at":"2013-05-04T09:50:53.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959744-game1-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959751,"todolist_id":7191375,"position":6,"content":"Game2 tested on IE8","completed":false,"created_at":"2013-05-04T09:51:03.000+09:00","updated_at":"2013-05-04T09:51:03.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959751-game2-tested-on-ie8.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959753,"todolist_id":7191375,"position":7,"content":"Game2 tested on IE9","completed":false,"created_at":"2013-05-04T09:51:07.000+09:00","updated_at":"2013-05-04T09:51:07.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959753-game2-tested-on-ie9.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959757,"todolist_id":7191375,"position":8,"content":"Game2 tested on IE10","completed":false,"created_at":"2013-05-04T09:51:10.000+09:00","updated_at":"2013-05-04T09:51:10.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959757-game2-tested-on-ie10.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959792,"todolist_id":7191375,"position":9,"content":"Game2 tested on Chrome","completed":false,"created_at":"2013-05-04T09:51:59.000+09:00","updated_at":"2013-05-04T09:51:59.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959792-game2-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959797,"todolist_id":7191375,"position":10,"content":"Game2 tested on Firefox","completed":false,"created_at":"2013-05-04T09:52:06.000+09:00","updated_at":"2013-05-04T09:52:06.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959797-game2-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":42065825,"todolist_id":7208705,"position":1,"content":"Publish to public on GitHub","completed":false,"created_at":"2013-05-06T22:07:18.000+09:00","updated_at":"2013-05-06T22:07:18.000+09:00","comments_count":0,"due_on":"2013-05-13","due_at":"2013-05-13","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/42065825-publish-to-public-on.json","todolist":"Memory Game","project":"SkyTeam Online Campaign","project_id":2664093}];
    scope.groupByProject();
    var expectedProjects = [{"name":"Lacoste Univers","id":1641438,"allTodos":[{"id":39435405,"todolist_id":6773708,"position":1,"content":"Check Korean for Jewels Shoes Watches","completed":false,"created_at":"2013-04-16T17:50:33.000+09:00","updated_at":"2013-05-03T16:20:33.000+09:00","comments_count":3,"due_on":"2013-05-08","due_at":"2013-05-08","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527441,"type":"Person","name":"Adrien Desbiaux"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/39435405-check-korean-for.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":40712446,"todolist_id":6773708,"position":2,"content":"Kr - Add watches banner + jewels + shoes","completed":false,"created_at":"2013-04-25T10:39:07.000+09:00","updated_at":"2013-04-30T21:29:17.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/40712446-kr-add-watches.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":40712476,"todolist_id":6773708,"position":3,"content":"Kr - Complete xml for Watches + jewels + shoes","completed":false,"created_at":"2013-04-25T10:39:41.000+09:00","updated_at":"2013-04-25T11:15:55.000+09:00","comments_count":0,"due_on":"2013-04-26","due_at":"2013-04-26","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527441,"type":"Person","name":"Adrien Desbiaux"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/40712476-kr-complete-xml.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":40712501,"todolist_id":6773708,"position":4,"content":"Kr - Add watches + jewels + shoes banners on mobile site","completed":false,"created_at":"2013-04-25T10:40:51.000+09:00","updated_at":"2013-04-25T11:16:11.000+09:00","comments_count":0,"due_on":"2013-04-29","due_at":"2013-04-29","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":2527441,"type":"Person","name":"Adrien Desbiaux"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/40712501-kr-add-watches.json","todolist":"[Collections] Jewels, Watches, Shoes ","project":"Lacoste Univers","project_id":1641438},{"id":43502885,"todolist_id":6271764,"position":1,"content":"Confirm RoadShow banner on test.lacoste.co.kr/univers","completed":false,"created_at":"2013-05-16T14:08:03.000+09:00","updated_at":"2013-05-16T14:08:03.000+09:00","comments_count":0,"due_on":"2013-05-16","due_at":"2013-05-16","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527423,"type":"Person","name":"Hyunjung Lee"},"url":"https://basecamp.com/2004093/api/v1/projects/1641438-lacoste-univers/todos/43502885-confirm-roadshow.json","todolist":"Banners","project":"Lacoste Univers","project_id":1641438}]},{"name":"Lacoste Polo","id":2004341,"allTodos":[{"id":36183676,"todolist_id":6141826,"position":1,"content":"Please check with Youngchul and Antoine if master are ok","completed":false,"created_at":"2013-03-22T09:24:39.000+09:00","updated_at":"2013-03-22T09:24:39.000+09:00","comments_count":0,"due_on":"2013-03-22","due_at":"2013-03-22","creator":{"id":2527356,"name":"Olivier Mouroux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/3f4607037c1b2b0d65016d9189a1bf171c92284c/avatar.gif?r=3"},"assignee":{"id":3606528,"type":"Person","name":"KellyMJ KIM"},"url":"https://basecamp.com/2004093/api/v1/projects/2004341-lacoste-polo/todos/36183676-please-check-with.json","todolist":"PM","project":"Lacoste Polo","project_id":2004341},{"id":39791695,"todolist_id":6834369,"position":1,"content":"Korean - Create Rules in PDF","completed":false,"created_at":"2013-04-18T18:34:00.000+09:00","updated_at":"2013-04-18T18:34:00.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2004341-lacoste-polo/todos/39791695-korean-create.json","todolist":"DTS","project":"Lacoste Polo","project_id":2004341},{"id":43152185,"todolist_id":6834369,"position":2,"content":"home banner replacement","completed":false,"created_at":"2013-05-14T18:22:18.000+09:00","updated_at":"2013-05-14T18:24:13.000+09:00","comments_count":1,"due_on":"2013-05-15","due_at":"2013-05-15","creator":{"id":2527423,"name":"Hyunjung Lee","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/4aedabe1802d6cfde3f5a5c5c2fe6e8d…08a560f94afa2b00006e8954fe0aab815c57146e1d19eb67f677aa10ac2/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2004341-lacoste-polo/todos/43152185-home-banner.json","todolist":"DTS","project":"Lacoste Polo","project_id":2004341}]},{"name":"Asiance website, blogs and facebook","id":2120902,"allTodos":[{"id":39189314,"todolist_id":5600913,"position":1,"content":"Correct fonts for differents languages","completed":false,"created_at":"2013-04-14T11:36:28.000+09:00","updated_at":"2013-04-27T11:37:37.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2120902-asiance-website/todos/39189314-correct-fonts-for.json","todolist":"Updates","project":"Asiance website, blogs and facebook","project_id":2120902}]},{"name":"Basecamp Chrome Extension - Bitx","id":2155413,"allTodos":[{"id":38298142,"todolist_id":6166411,"position":1,"content":"Todo test","completed":false,"created_at":"2013-04-08T09:49:37.000+09:00","updated_at":"2013-05-14T14:29:38.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":3768284,"name":"Gilles Piou","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/e32a5c25c36ecdfd8c9a51340e400351…eaf627f786162294cb4a5801da6379356d7078157fbfac76f160bde6694/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/38298142-todo-test.json","todolist":"TODO LIST FOR TEST ONLY","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":38487794,"todolist_id":6611252,"position":1,"content":"filter based on Firstname and replace space by dash","completed":false,"created_at":"2013-04-09T10:23:19.000+09:00","updated_at":"2013-04-09T10:30:30.000+09:00","comments_count":0,"due_on":"2013-04-09","due_at":"2013-04-09","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/38487794-filter-based-on.json","todolist":"Misc","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":38715271,"todolist_id":6611252,"position":2,"content":"visit this todo is not localized","completed":false,"created_at":"2013-04-10T18:57:01.000+09:00","updated_at":"2013-04-10T18:57:01.000+09:00","comments_count":0,"due_on":"2013-04-10","due_at":"2013-04-10","creator":{"id":2527441,"name":"Adrien Desbiaux","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/a0a3c428a38a81161a575b3d9e581c7c…b1699258129fd6f1c3e0124c5947341d90041e5f48bf3a17af384d376b7/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/38715271-visit-this-todo-is.json","todolist":"Misc","project":"Basecamp Chrome Extension - Bitx","project_id":2155413},{"id":41111117,"todolist_id":7052000,"position":1,"content":"Validate design with Antoine","completed":false,"created_at":"2013-04-29T12:19:19.000+09:00","updated_at":"2013-04-29T12:19:19.000+09:00","comments_count":0,"due_on":"2013-04-29","due_at":"2013-04-29","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":3768284,"type":"Person","name":"Gilles Piou"},"url":"https://basecamp.com/2004093/api/v1/projects/2155413-basecamp-chrome/todos/41111117-validate-design-with.json","todolist":"Website","project":"Basecamp Chrome Extension - Bitx","project_id":2155413}]},{"name":"Finnair - Campaigns only for FB members","id":2621444,"allTodos":[{"id":43156241,"todolist_id":7053347,"position":1,"content":"Reporting analytics","completed":false,"created_at":"2013-05-14T19:06:57.000+09:00","updated_at":"2013-05-14T19:06:57.000+09:00","comments_count":0,"due_on":"2013-05-15","due_at":"2013-05-15","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2621444-finnair-campaigns/todos/43156241-reporting-analytics.json","todolist":"Development","project":"Finnair - Campaigns only for FB members","project_id":2621444}]},{"name":"SkyTeam Online Campaign","id":2664093,"allTodos":[{"id":41959135,"todolist_id":7191048,"position":1,"content":"Analytics tags are inserted","completed":false,"created_at":"2013-05-04T09:32:35.000+09:00","updated_at":"2013-05-04T09:32:35.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959135-analytics-tags-are.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959144,"todolist_id":7191048,"position":2,"content":"Analytics trackers are validated and inserted","completed":false,"created_at":"2013-05-04T09:32:59.000+09:00","updated_at":"2013-05-04T09:32:59.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959144-analytics-trackers.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959151,"todolist_id":7191048,"position":3,"content":"Open Graph tags are correct and tested","completed":false,"created_at":"2013-05-04T09:33:26.000+09:00","updated_at":"2013-05-04T09:33:26.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959151-open-graph-tags-are.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959160,"todolist_id":7191048,"position":4,"content":"Console is free of errors on IE8+, Chrome, Firefox","completed":false,"created_at":"2013-05-04T09:34:07.000+09:00","updated_at":"2013-05-04T09:34:07.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959160-console-is-free-of.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959171,"todolist_id":7191048,"position":5,"content":"Database backup is done everyday","completed":false,"created_at":"2013-05-04T09:34:33.000+09:00","updated_at":"2013-05-04T09:34:41.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959171-database-backup-is.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959252,"todolist_id":7191048,"position":7,"content":"CSS is minimified","completed":false,"created_at":"2013-05-04T09:37:19.000+09:00","updated_at":"2013-05-04T09:37:24.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959252-css-is-minimified.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959336,"todolist_id":7191048,"position":8,"content":"Javascript is minimified","completed":false,"created_at":"2013-05-04T09:38:04.000+09:00","updated_at":"2013-05-04T09:38:04.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959336-javascript-is.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959363,"todolist_id":7191048,"position":10,"content":"Score is reasonable in Page Speed","completed":false,"created_at":"2013-05-04T09:38:36.000+09:00","updated_at":"2013-05-04T09:38:39.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959363-score-is-reasonable.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959376,"todolist_id":7191048,"position":11,"content":"Humans.txt ;-)","completed":false,"created_at":"2013-05-04T09:39:18.000+09:00","updated_at":"2013-05-04T09:39:18.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959376-humans-txt.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959407,"todolist_id":7191048,"position":12,"content":"Meta description and title are OK","completed":false,"created_at":"2013-05-04T09:40:32.000+09:00","updated_at":"2013-05-04T09:40:35.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959407-meta-description-and.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959447,"todolist_id":7191048,"position":13,"content":"HTTP expires correctly configured","completed":false,"created_at":"2013-05-04T09:41:54.000+09:00","updated_at":"2013-05-04T09:41:54.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959447-http-expires.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959519,"todolist_id":7191048,"position":14,"content":"Scripts are configured with production URLs (CDN, ...)","completed":false,"created_at":"2013-05-04T09:43:49.000+09:00","updated_at":"2013-05-04T09:44:04.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959519-scripts-are.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959551,"todolist_id":7191048,"position":9,"content":"Sprites don't contains unused images","completed":false,"created_at":"2013-05-04T09:45:02.000+09:00","updated_at":"2013-05-04T09:45:07.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959551-sprites-don-t.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959656,"todolist_id":7191048,"position":6,"content":"Favicon!","completed":false,"created_at":"2013-05-04T09:48:42.000+09:00","updated_at":"2013-05-04T09:48:51.000+09:00","comments_count":0,"due_on":"2013-05-24","due_at":"2013-05-24","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959656-favicon.json","todolist":"Production","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959722,"todolist_id":7191375,"position":1,"content":"Game1 tested on IE8","completed":false,"created_at":"2013-05-04T09:50:23.000+09:00","updated_at":"2013-05-04T09:50:23.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959722-game1-tested-on-ie8.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959729,"todolist_id":7191375,"position":2,"content":"Game1 tested on IE9","completed":false,"created_at":"2013-05-04T09:50:33.000+09:00","updated_at":"2013-05-04T09:50:33.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959729-game1-tested-on-ie9.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959739,"todolist_id":7191375,"position":3,"content":"Game1 tested on IE10","completed":false,"created_at":"2013-05-04T09:50:42.000+09:00","updated_at":"2013-05-04T09:50:42.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959739-game1-tested-on-ie10.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959741,"todolist_id":7191375,"position":4,"content":"Game1 tested on Chrome","completed":false,"created_at":"2013-05-04T09:50:48.000+09:00","updated_at":"2013-05-04T09:50:48.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959741-game1-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959744,"todolist_id":7191375,"position":5,"content":"Game1 tested on Firefox","completed":false,"created_at":"2013-05-04T09:50:53.000+09:00","updated_at":"2013-05-04T09:50:53.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959744-game1-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959751,"todolist_id":7191375,"position":6,"content":"Game2 tested on IE8","completed":false,"created_at":"2013-05-04T09:51:03.000+09:00","updated_at":"2013-05-04T09:51:03.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959751-game2-tested-on-ie8.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959753,"todolist_id":7191375,"position":7,"content":"Game2 tested on IE9","completed":false,"created_at":"2013-05-04T09:51:07.000+09:00","updated_at":"2013-05-04T09:51:07.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959753-game2-tested-on-ie9.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959757,"todolist_id":7191375,"position":8,"content":"Game2 tested on IE10","completed":false,"created_at":"2013-05-04T09:51:10.000+09:00","updated_at":"2013-05-04T09:51:10.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959757-game2-tested-on-ie10.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959792,"todolist_id":7191375,"position":9,"content":"Game2 tested on Chrome","completed":false,"created_at":"2013-05-04T09:51:59.000+09:00","updated_at":"2013-05-04T09:51:59.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959792-game2-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":41959797,"todolist_id":7191375,"position":10,"content":"Game2 tested on Firefox","completed":false,"created_at":"2013-05-04T09:52:06.000+09:00","updated_at":"2013-05-04T09:52:06.000+09:00","comments_count":0,"due_on":null,"due_at":null,"creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/41959797-game2-tested-on.json","todolist":"QA","project":"SkyTeam Online Campaign","project_id":2664093},{"id":42065825,"todolist_id":7208705,"position":1,"content":"Publish to public on GitHub","completed":false,"created_at":"2013-05-06T22:07:18.000+09:00","updated_at":"2013-05-06T22:07:18.000+09:00","comments_count":0,"due_on":"2013-05-13","due_at":"2013-05-13","creator":{"id":2527420,"name":"Laurent Le Graverend","avatar_url":"http://dge9rmgqjs8m1.cloudfront.net/global/620f1b8420834019047d7fff49eeb79510a52cf3/avatar.gif?r=3"},"assignee":{"id":2527420,"type":"Person","name":"Laurent Le Graverend"},"url":"https://basecamp.com/2004093/api/v1/projects/2664093-skyteam-online/todos/42065825-publish-to-public-on.json","todolist":"Memory Game","project":"SkyTeam Online Campaign","project_id":2664093}]}];
    expect(angular.equals(scope.projects, expectedProjects)).toBe(true);
  });
});
