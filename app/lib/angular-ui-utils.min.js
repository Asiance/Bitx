/**
 * angular-ui-utils - Swiss-Army-Knife of AngularJS tools (with no external dependencies!)
 * @version v0.0.2 - 2013-05-08
 * @link http://angular-ui.github.com
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){return function(n,i,t){var r=n.$eval(t.uiEvent);angular.forEach(r,function(t,r){var u=e(t);i.bind(r,function(e){var i=Array.prototype.slice.call(arguments);i=i.splice(1),n.$apply(function(){u(n,{$event:e,$params:i})})})})}}]),angular.module("ui.format",[]).filter("format",function(){return function(e,n){if(!e)return e;var i,t=""+e;return void 0===n?t:angular.isArray(n)||angular.isObject(n)?(i=angular.isArray(n)&&"$"||":",angular.forEach(n,function(e,n){t=t.split(i+n).join(e)}),t):t.split("$0").join(n)}}),angular.module("ui.highlight",[]).filter("highlight",function(){return function(e,n,i){return n||angular.isNumber(n)?(e=""+e,n=""+n,i?e.split(n).join('<span class="ui-match">'+n+"</span>"):e.replace(RegExp(n,"gi"),'<span class="ui-match">$&</span>')):e}}),angular.module("ui.if",[]).directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,n,i){return function(e,n,t){var r,u;e.$watch(t.uiIf,function(t){r&&(r.remove(),r=void 0),u&&(u.$destroy(),u=void 0),t&&(u=e.$new(),i(u,function(e){r=e,n.after(e)}))})}}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){function e(e){return e.replace(/^([a-z])|\s+([a-z])/g,function(e){return e.toUpperCase()})}function n(e,n){return e.replace(/[A-Z]/g,function(e){return n+e})}var i={humanize:function(i){return e(n(i," ").split("_").join(" "))},underscore:function(e){return e.substr(0,1).toLowerCase()+n(e.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(n){return n=n.substr(0,1).toLowerCase()+e(n.split("_").join(" ")).substr(1).split(" ").join("")}};return function(e,n){return n!==!1&&angular.isString(e)?(n=n||"humanize",i[n](e)):e}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(e,n){return{restrict:"A",compile:function(i,t){if(!angular.isFunction(i[t.uiJq]))throw Error('ui-jq: The "'+t.uiJq+'" function does not exist');var r=e&&e[t.uiJq];return function(e,i,t){function u(){n(function(){i[t.uiJq].apply(i,a)},0,!1)}var a=[];t.uiOptions?(a=e.$eval("["+t.uiOptions+"]"),angular.isObject(r)&&angular.isObject(a[0])&&(a[0]=angular.extend({},r,a[0]))):r&&(a=[r]),t.ngModel&&i.is("select,input,textarea")&&i.bind("change",function(){i.trigger("input")}),t.uiRefresh&&e.$watch(t.uiRefresh,function(){u()}),u()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(e){var n={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},i=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(t,r,u,a){var o,l=[];o=r.$eval(a["ui"+i(t)]),angular.forEach(o,function(n,i){var t,r;r=e(n),angular.forEach(i.split(" "),function(e){t={expression:r,keys:{}},angular.forEach(e.split("-"),function(e){t.keys[e]=!0}),l.push(t)})}),u.bind(t,function(e){var i=!(!e.metaKey||e.ctrlKey),u=!!e.altKey,a=!!e.ctrlKey,o=!!e.shiftKey,s=e.keyCode;"keypress"===t&&!o&&s>=97&&122>=s&&(s-=32),angular.forEach(l,function(t){var l=t.keys[n[e.keyCode]]||t.keys[""+e.keyCode],s=!!t.keys.meta,c=!!t.keys.alt,f=!!t.keys.ctrl,d=!!t.keys.shift;l&&s===i&&c===u&&f===a&&d===o&&r.$apply(function(){t.expression(r,{$event:e})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){return{link:function(n,i,t){e("keydown",n,i,t)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){return{link:function(n,i,t){e("keypress",n,i,t)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){return{link:function(n,i,t){e("keyup",n,i,t)}}}]),angular.module("ui.mask",[]).directive("uiMask",[function(){var e={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};return{priority:100,require:"ngModel",restrict:"A",link:function(n,i,t,r){function u(e){return angular.isDefined(e)?(p(e),_?(s(),c(),void 0):l()):l()}function a(e){return _?(R=h(e||""),q=d(R),r.$setValidity("mask",q),q&&R.length?g(R):void 0):e}function o(e){return _?(R=h(e||""),q=d(R),viewValue=R.length?g(R):"",r.$viewValue=viewValue,r.$setValidity("mask",q),""===R&&void 0!==r.$error.required&&r.$setValidity("required",!1),q?R:void 0):e}function l(){return _=!1,f(),angular.isDefined(K)?i.attr("placeholder",K):i.removeAttr("placeholder"),angular.isDefined(z)?i.attr("maxlength",z):i.removeAttr("maxlength"),i.val(r.$modelValue),r.$viewValue=r.$modelValue,!1}function s(){R=j=h(r.$modelValue||""),A=O=g(R),q=d(R),viewValue=q&&R.length?A:"",t.maxlength&&i.attr("maxlength",2*V[V.length-1]),i.attr("placeholder",C),i.val(viewValue),r.$viewValue=viewValue}function c(){return T?!0:(i.bind("blur",v),i.bind("mousedown mouseup",m),i.bind("input keyup click",y),T=!0,void 0)}function f(){return T?(i.unbind("blur",v),i.unbind("mousedown",m),i.unbind("mouseup",m),i.unbind("input",y),i.unbind("keyup",y),i.unbind("click",y),T=!1,void 0):!0}function d(e){return e.length?e.length===V.length-1:!0}function h(e){var n="",i=S.slice();return e=""+e,angular.forEach(E,function(n){e=e.replace(n,"")}),angular.forEach(e.split(""),function(e){i.length&&i[0].test(e)&&(n+=e,i.shift())}),n}function g(e){var n="",i=V.slice();return angular.forEach(C.split(""),function(t,r){e.length&&r===i[0]?(n+=e.charAt(0)||"_",e=e.substr(1),i.shift()):n+=t}),n}function p(n){var i=0;V=[],S=[],C="","string"==typeof n&&angular.forEach(n.split(""),function(n){e[n]?(V.push(i),C+="_",S.push(e[n])):C+=n,i++}),V.push(V.slice().pop()+1),E=C.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_"),_=V.length>1?!0:!1}function v(){M=0,H=0,q&&0!==R.length||(A="",i.val(""),n.$apply(function(){r.$setViewValue("")}))}function m(e){"mousedown"===e.type?i.bind("mouseout",$):i.unbind("mouseout",$)}function $(){H=x(this),i.unbind("mouseout",$)}function y(e){e=e||{};var t=e.which,u=e.type;if(16===t||91===t)return!0;var a,o=i.val(),l=O,s=h(o),c=j,f=!1,d=b(this)||0,p=M||0,v=d-p,m=V[0],$=V[s.length]||V.slice().shift(),y=x(this),S=H||0,C=y>0,E=S>0,R=o.length>l.length||S&&o.length>l.length-S,A=o.length<l.length||S&&o.length===l.length-S,q=t>=37&&40>=t&&e.shiftKey,_=37===t,T=8===t||"keyup"!==u&&A&&-1===v,K=46===t||"keyup"!==u&&A&&0===v&&!E,z=(_||T||"click"===u)&&d>m;if(H=y,q||C&&("click"===u||"keyup"===u))return!0;if("input"===u&&A&&!E&&s===c){for(;T&&d>m&&!k(d);)d--;for(;K&&$>d&&-1===V.indexOf(d);)d++;var J=V.indexOf(d);s=s.substring(0,J)+s.substring(J+1),f=!0}for(a=g(s),O=a,j=s,i.val(a),f&&n.$apply(function(){r.$setViewValue(s)}),R&&m>=d&&(d=m+1),z&&d--,d=d>$?$:m>d?m:d;!k(d)&&d>m&&$>d;)d+=z?-1:1;(z&&$>d||R&&!k(p))&&d++,M=d,w(this,d)}function k(e){return V.indexOf(e)>-1}function b(e){if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var n=document.selection.createRange();return n.moveStart("character",-e.value.length),n.text.length}}function w(e,n){if(0===e.offsetWidth||0===e.offsetHeight)return!0;if(e.setSelectionRange)e.focus(),e.setSelectionRange(n,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select()}}function x(e){return void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:void 0}var V,S,C,E,R,A,q,O,j,M,H,_=!1,T=!1,K=t.placeholder,z=t.maxlength;t.$observe("uiMask",u),r.$formatters.push(a),r.$parsers.push(o),i.bind("mousedown mouseup",m),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if(0===i)return-1;var t=0;if(arguments.length>1&&(t=Number(arguments[1]),t!==t?t=0:0!==t&&1/0!==t&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=i)return-1;for(var r=t>=0?t:Math.max(i-Math.abs(t),0);i>r;r++)if(r in n&&n[r]===e)return r;return-1})}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){var n=null;return void 0!==e&&(n=e),{require:"ngModel",link:function(e,i,t,r){var u;u=angular.element('<a class="ui-reset" />'),i.wrap('<span class="ui-resetwrap" />').after(u),u.bind("click",function(i){i.preventDefault(),e.$apply(function(){t.uiReset?r.$setViewValue(e.$eval(t.uiReset)):r.$setViewValue(n),r.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,n){return{restrict:"AC",scope:!0,compile:function(i,t){var r;if(t.uiRoute)r="uiRoute";else if(t.ngHref)r="ngHref";else{if(!t.href)throw Error("uiRoute missing a route or href property on "+i[0]);r="href"}return function(i,t,u){function a(n){(hash=n.indexOf("#"))>-1&&(n=n.substr(hash+1)),s=function(){l(i,e.path().indexOf(n)>-1)},s()}function o(n){(hash=n.indexOf("#"))>-1&&(n=n.substr(hash+1)),s=function(){var t=RegExp("^"+n+"$",["i"]);l(i,t.test(e.path()))},s()}var l=n(u.ngModel||u.routeModel||"$uiRoute").assign,s=angular.noop;switch(r){case"uiRoute":u.uiRoute?o(u.uiRoute):u.$observe("uiRoute",o);break;case"ngHref":u.ngHref?a(u.ngHref):u.$observe("ngHref",a);break;case"href":a(u.href)}i.$on("$routeChangeSuccess",function(){s()})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){"use strict";return{require:"^?uiScrollfixTarget",link:function(n,i,t,r){var u=i[0].offsetTop,a=r&&r.$element||angular.element(e);t.uiScrollfix?"-"===t.uiScrollfix.charAt(0)?t.uiScrollfix=u-t.uiScrollfix.substr(1):"+"===t.uiScrollfix.charAt(0)&&(t.uiScrollfix=u+parseFloat(t.uiScrollfix.substr(1))):t.uiScrollfix=u,a.bind("scroll.ui-scrollfix",function(){var n;if(angular.isDefined(e.pageYOffset))n=e.pageYOffset;else{var r=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;n=r.scrollTop}!i.hasClass("ui-scrollfix")&&n>t.uiScrollfix?i.addClass("ui-scrollfix"):i.hasClass("ui-scrollfix")&&t.uiScrollfix>n&&i.removeClass("ui-scrollfix")})}}}]).directive("uiScrollfixTarget",[function(){"use strict";return{controller:function(e){this.$element=e}}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(e,n,i){e.$watch(i.uiShow,function(e){e?n.addClass("ui-show"):n.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(e,n,i){e.$watch(i.uiHide,function(e){e?n.addClass("ui-hide"):n.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(e,n,i){e.$watch(i.uiToggle,function(e){e?n.removeClass("ui-hide").addClass("ui-show"):n.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",function(){return function(e,n){if(n===!1)return e;if((n||angular.isUndefined(n))&&angular.isArray(e)){var i=[],t=function(e){return angular.isObject(e)&&angular.isString(n)?e[n]:e};angular.forEach(e,function(e){for(var n=!1,r=0;i.length>r;r++)if(angular.equals(t(i[r]),t(e))){n=!0;break}n||i.push(e)}),e=i}return e}}),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(e,n,i,t){var r,u,a={},o=e.$eval(i.uiValidate);o&&(angular.isString(o)&&(o={validator:o}),angular.forEach(o,function(n,i){r=function(r){var u=e.$eval(n,{$value:r});return angular.isFunction(u.then)?(u.then(function(){t.$setValidity(i,!0)},function(){t.$setValidity(i,!1)}),r):u?(t.$setValidity(i,!0),r):(t.$setValidity(i,!1),void 0)},a[i]=r,t.$formatters.push(r),t.$parsers.push(r)}),i.uiValidateWatch&&(u=e.$eval(i.uiValidateWatch),angular.isString(u)?e.$watch(u,function(){angular.forEach(a,function(e){e(t.$modelValue)})}):angular.forEach(u,function(n,i){e.$watch(n,function(){a[i](t.$modelValue)})})))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.if","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.showhide","ui.unique","ui.validate"]);